# 挂载命令

### 1.mount命令基本格式

linux所有存储设备都必须挂载使用，包括硬盘

```shell
#查询系统中已经挂载的设备，-l会显示卷标名称
mount [-l]

#依据配置文件/etc/fstab的内容，自动挂载
mount -a


mount [-t 文件系统] [-L 卷标名] [-o 特殊选项] 设备文件名 挂载点
选项：
-t 文件系统：加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统。
-L 卷标名：挂载指定卷标的分区，而不是安装设备文件名挂载
-o 特殊选项：可以指定挂载的额外选项，比如读写权限、同步异步等，如果不指定则默认值生效。

```



### 2.光盘挂载

光盘挂载的前提依然是指定光盘的设备文件名，不同版本的linux，设备文件名并不相同：

- Centos 5.x以前的系统，光盘设备文件名是/dev/hdc
- Centos 6.x以后的系统，光盘设备文件名是/dev/sr0

不论哪个系统都有软链接/dev/cdrom，与可以作为光盘的设备文件名

```shell
#挂载光盘
mount -t iso9660 /dev/cdrom /mnt/cdrom
```

用完之后记得卸载：

```shell
#因为设备文件名和挂载点已经连接到一起，卸载哪一个都可以
umount /dev/sr0
umount /mnt/cdrom
注意：卸载的时候需要退出光盘目录，才能正常卸载
```



### 3.挂载U盘

Upan会和硬盘公用设备文件名，所以U盘的设备文件名是不固定的，需要手工查询，查询命令：

```shell
#查询硬盘
fdisk -l
```

然后就是挂载了，挂载命令如下：

```shell
mount -t vfat /dev/sdb1 /mnt/usb
#挂载U盘。因为是window分区，所以是vfat文件系统格式
```

如果U盘中有中文，会发现中文是乱码。Linux要想正常显示中文，需要两个条件：

- 安装了中文编码和中文字体
- 操作终端需要支持中文显示（纯字符终端，是不支持中文编码的）

而我们当前系统是安装了中文编码和字体，而xshell远程重点是window下的程序，当然是支持中文显示的。那之所以挂载U盘还出现乱码，是需要在挂载的时候，手工指定中文编码，例如：

```shell
mount -t vfat -o iocharset=utf8 /dev/sdb1 /mnt/usb/		#指定中文编码格式为UTF-8

umount /mnt/usb/		#卸载
```



### 4.挂载NTFS分区

**4.1linux的驱动加载顺序：**

- 驱动直接放在系统内核之中。这种驱动中主要是系统启动加载必须的驱动，数量较少。
- 驱动以模块的形式放在硬盘。大多数驱动都以这种方式保存，保存位置在/lib/modules/3.10.0-1127.el7.x86_64（当前系统内核的版本）/kernel/中。
- 驱动可以被linux识别，但是系统认为这种驱动一般不常用，默认不加载。如果需要加载这种驱动，需要重新编译内核，而NTFS文件系统的驱动就属于这种情况。
- 硬件不能被linux内核识别，需要手工安装驱动，当然前提是厂商提供了该硬件针对linux的驱动，否则就需要自己开发驱动了。

**4.2使用NTFS-3G安装NTFS文件系统模块**

- 下载NTFS-3G插件
- 安装NTFS-3G插件

在编译安装NTFS-3G插件之前，要保证gcc编译器已经按照。具体安装命令如下：

```shell
#解压
tar -zxvf ntfs-3g_ntfsprogs-2013.1.13.tgz

#进入解压目录
cd ntfs-3g_ntfsprogs-2013.1.13

#编译器准备。没有指定位置，安装到默认位置中
./configure

#编译
make

#编译安装
make install
```

安装完成后，就可以挂载和使用window的ntfs分区了，不过不要注意挂载分区时的文件系统不是ntfs，而是ntfs-3g。挂载命令如下：

```shell
mount -t ntfs-3g 分区设备文件名 挂载点

#例如：
mount -t ntfs-3g /dev/sdb1 /mnt/win
```

